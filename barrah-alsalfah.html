<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>لعبة برا السالفة</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=El+Messiri:wght@400..700&family=Lemonada:wght@300..700&family=Marhey:wght@300..700&display=swap');
</style>
    <style>
        * {
            box-sizing: border-box;
font-family:lemonada;
transition: 0.12s all ease-in-out;
-webkit-transition: 0.12s all ease-in-out;
-webkit-tap-highlight-color:transparent;
        }
        body {
            padding: 20px;
            background-image: url("data:image/svg+xml,<svg id='patternId' width='100%' height='100%' xmlns='http://www.w3.org/2000/svg'><defs><pattern id='a' patternUnits='userSpaceOnUse' width='100' height='100' patternTransform='scale(2) rotate(0)'><rect x='0' y='0' width='100%' height='100%' fill='%23ffffffff'/><path d='M19.95-15.33L18.32-.68 16.7 13.97l13.5-5.92 13.5-5.91L31.82-6.6zM62 68.18l21.15-23.32 9.62 29.98zm2.64-.85l26.08 5.64-8.15-25.4zm-44.7 17.42l-1.63 14.64-1.63 14.66 13.5-5.92 13.5-5.92-11.87-8.73z'  stroke-width='1' stroke='none' fill='%23ea6a0011'/><path d='M96.78 82.3a3.74 3.74 0 104.93-5.65 3.74 3.74 0 00-5.3.37 3.76 3.76 0 00.37 5.28zm-47.2-69.69l3.44-.23-.23-3.45-3.44.24zm-3.37 45.7a1.5 1.5 0 002.1-.15 1.5 1.5 0 00-.14-2.1 1.5 1.5 0 00-2.1.15 1.5 1.5 0 00.14 2.1zm24.66-45.06A8.5 8.5 0 1082.07.43a8.5 8.5 0 10-11.2 12.82zM-3.3 82.3a3.74 3.74 0 104.93-5.65 3.74 3.74 0 00-5.29.37 3.76 3.76 0 00.36 5.28zm74.17 31.03a8.5 8.5 0 1011.2-12.82 8.5 8.5 0 10-11.2 12.82zm6.34-78.02c-2.44.5-5.05-.5-7.13-2.7-.28-.3-.43-.68-.41-1.1a1.5 1.5 0 011.56-1.46c.4 0 .78.17 1.06.47 1.37 1.45 2.9 2.1 4.33 1.8 1.41-.28 2.58-1.47 3.28-3.35 1.06-2.84 3.08-4.77 5.52-5.26 2.44-.5 5.05.5 7.13 2.7.54.57.56 1.43.06 2.02l-.12.13c-.6.57-1.57.54-2.14-.07-1.37-1.45-2.9-2.1-4.32-1.8-1.42.28-2.6 1.47-3.29 3.35-.92 2.46-2.54 4.22-4.55 4.97-.32.14-.64.24-.98.3zm8.64-9.5c1.73-.34 3.56.4 5.15 2.08a.63.63 0 00.94-.03c.2-.24.2-.6-.03-.83-1.87-1.98-4.17-2.87-6.3-2.43-2.14.43-3.91 2.15-4.86 4.7-.82 2.17-2.22 3.55-3.95 3.91-1.73.35-3.56-.38-5.15-2.07a.62.62 0 00-1.08.41c-.01.17.05.32.17.45 1.87 1.98 4.17 2.87 6.3 2.43 2.14-.43 3.91-2.15 4.87-4.7.7-1.89 1.85-3.18 3.28-3.72.2-.08.43-.15.66-.2zM39.33 79.5c.54 0 1-.4 1.07-.96.32-2.86-.55-5.34-2.39-6.8-1.83-1.45-4.44-1.72-7.15-.74-2.03.73-3.84.58-5.11-.41-1.26-1-1.82-2.73-1.58-4.87a1.08 1.08 0 00-.94-1.2 1.08 1.08 0 00-1.19.95c-.32 2.87.54 5.35 2.38 6.8 1.84 1.45 4.44 1.72 7.15.75 2.04-.73 3.85-.58 5.12.41 1.25 1 1.82 2.73 1.57 4.87a1.08 1.08 0 001.07 1.2z'  stroke-width='1' stroke='none' fill='%23ea6a0011'/><path d='M6.7 27.57l18.65-5.83 5.84 18.64-18.65 5.84zm17.68-3.97l-15.8 4.96 4.94 15.8 15.81-4.95zm78.1-33.38l-9.04 3.62 3.62 9.05 9.04-3.62zm3.68 67.2l-9.67 2.99.57 1.86 9.67-3zM55.35 89.61l.7 1.74 12.14-4.87-.7-1.74zm5.28-48.27l1.32-.91-12.24-17.66-1.32.92zM2.4-9.78l-9.04 3.62 3.62 9.04L6.02-.74zm3.68 67.2l-9.67 3 .57 1.85 9.67-2.99zm96.4 32.88l-9.05 3.62 3.62 9.04 9.04-3.62zM2.4 90.3l-9.05 3.62 3.63 9.04 9.04-3.62z'   stroke-width='1' stroke='none' fill='%23ea6a0011'/></pattern></defs><rect width='800%' height='800%' transform='translate(0,0)' fill='url(%23a)'/></svg>");
background-reapeat:no-repeat;
background-attachment:attachment;
background-size:cover;
color:#ea6a00;
        }
        h1 {
            text-align: center;
color:#ea6a00;
font-size:24px;
        }
h2{
font-size: 20px;
text-align: center;
}
p{
font-size: 16px;
}
        .contexts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        .contexts div {
            background: ;
            color: transparent;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .contexts div:active {
            filter:brightness(0.9);
transform:rotate(2deg);
transition: 0.2s all ease-in-out;
-webkit-transition: 0.2s all ease-in-out;
        }
        .player-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            padding: 8px;
            background: #ea6a00;
            color: white;
            border: none;
            border-radius: 50px;
box-shadow:0 5px #d46000;
font-size: 14px;
        }
        .player-label i {
            cursor: pointer;
position: relative;
left:5px;
font-size: 18px;
        }
        .player-label i:active{
            color: #ddd;
transition: 0.2s all ease-in-out;
-webkit-transition: 0.2s all ease-in-out;
        }
        input[type="text"] {
            padding: 10px;
            width: calc(100% - 60px);
        }
        button{
            padding: 10px;
            background: #ea6a00;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
box-shadow:0 5px #d46000;
font-size: 14px;
        }
        button:not(.confirm-btn-fc, .confirm-btn, .cancel-btn, .guessedAnswerC, .guessedAnswerW):active, .player-label:active{
            filter:brightness(0.9);
box-shadow:0 4px #d46000;
transition: 0.2s all ease-in-out;
-webkit-transition: 0.2s all ease-in-out;
        }
.guessedAnswerC{
background-color:green;
box-shadow:0 5px darkGreen;
}
.guessedAnswerW{
background-color:red;
box-shadow:0 5px darkRed;
}
.guessedAnswerC:active{
filter:brightness(0.9);
box-shadow:0 4px darkGreen;
transition: 0.2s all ease-in-out;
-webkit-transition: 0.2s all ease-in-out;
}
.guessedAnswerW:active{
filter:brightness(0.9);
box-shadow:0 4px darkRed;
transition: 0.2s all ease-in-out;
-webkit-transition: 0.2s all ease-in-out;
}
        #jesterToggle {
            margin-left: 10px;
        }
.cover{
width:100%;
height:auto;
display: block;
border-radius:4px;
box-shadow: 5px 5px 5px #00000099;
}
input[type="checkbox"]{
accent-color:#ea6a00;
position: relative;
top:3px;
}
input[type="text"]{
background: #ea6a00;
            color: white;
            border: none;
            border-radius: 5px;
box-shadow:0 5px #d46000;
font-size: 14px;
width:100%;
height:42px;
}
input[type="text"]:hover, input[type="text"]:focus{
border:none;
outline:none;
box-shadow:0 4px #d46000;
}
input[type="text"]::placeholder{
color:#fff;
}
.exitRound{
display:block;
background-color:#ea6a00;
position:absolute;
left:20px;
margin-top:30px;
}
.gridBtns{
display:grid;
grid-gap:15px;
justify-content: center; 
align-content: center;
}
.gridBtns button{
width:300px;
}
.scoreBoard{
display:flex;
flex-direction:column;
text-align: center;
justify-content: center;
align-items: center;
border-top:6px solid #ea6a00;
border-bottom:6px solid #ea6a00;
border-left:6px double #ea6a00;
border-right:6px double #ea6a00;
border-radius:4px 12px;
box-shadow: 0 0 5px #00000033;
padding:2px 10px 8px 10px;
margin-top:15px;
background-image: url("data:image/svg+xml,<svg id='patternId' width='100%' height='100%' xmlns='http://www.w3.org/2000/svg'><defs><pattern id='a' patternUnits='userSpaceOnUse' width='45' height='110' patternTransform='scale(2) rotate(0)'><rect x='0' y='0' width='100%' height='100%' fill='%23ffffffff'/><path d='M21.78 52.88a1.4 1.4 0 01-.51-1.9l5.87-10.18a1.4 1.4 0 011.9-.5c.68.38.9 1.23.52 1.9l-5.87 10.17a1.4 1.4 0 01-1.91.51zm18 49.07a1.1 1.1 0 01-.8-.35l-4-4.24a1.1 1.1 0 01.19-1.67l6.22-4.19-3.58-1.98a1.1 1.1 0 111.08-1.92l5.13 2.87c.33.2.55.53.56.91.02.38-.17.74-.48.96l-6.63 4.46 3.1 3.3c.43.44.4 1.14-.04 1.55-.21.2-.48.3-.75.3z'  stroke-width='1' stroke='none' fill='%23ea6a0011'/><path d='M-8.75 72c-.07 0-.13-.02-.2-.03a1.1 1.1 0 01-.88-1.28L-6.4 52.3a1.1 1.1 0 012.02-.38l6.06 9.73 3.77-11.78c.14-.43.53-.74.98-.76.45-.03.88.23 1.07.64l4.89 10.61a1.1 1.1 0 01-.54 1.46 1.1 1.1 0 01-1.46-.54l-3.7-8.04-3.65 11.34c-.13.41-.5.7-.91.76-.43.05-.84-.15-1.07-.5l-5.82-9.36-2.92 15.61c-.1.53-.56.9-1.08.9zm39.12-40.6c-.07 0-.13 0-.2-.02a1.12 1.12 0 01-.9-.92l-2.8-19a1.1 1.1 0 012.19-.33l2.33 15.83 7.23-12.85c.2-.36.59-.58 1-.56.4.02.78.26.96.63l3.9 8.4a1.1 1.1 0 11-1.98.92l-3.01-6.45-7.76 13.8c-.2.34-.56.55-.96.55zM36.25 72c-.07 0-.13-.02-.2-.03a1.1 1.1 0 01-.88-1.28L38.6 52.3a1.1 1.1 0 012.02-.38l6.06 9.73 3.77-11.78c.14-.43.53-.74.98-.76.45-.03.88.23 1.07.64l4.89 10.61a1.1 1.1 0 01-.54 1.46 1.1 1.1 0 01-1.46-.54l-3.7-8.04-3.65 11.34c-.13.41-.5.7-.91.76-.43.05-.84-.15-1.07-.5l-5.82-9.36-2.92 15.61c-.1.53-.56.9-1.08.9z'  stroke-width='1' stroke='none' fill='%23ea6a0011'/><path d='M16.8 91.46a1.1 1.1 0 01-1.09-.98L14.2 77.64a1.1 1.1 0 01.96-1.22 1.1 1.1 0 011.22.96l1.18 10.05 7.88-10.79a1.1 1.1 0 011.78 1.3l-9.53 13.07c-.21.28-.55.45-.9.45zm-6.28-53.42a1.1 1.1 0 01-1.06-.8L5.83 24.1a1.1 1.1 0 01.77-1.35 1.1 1.1 0 011.35.77l3.32 12.01 6.02-2.12a1.1 1.1 0 01.73 2.07l-7.13 2.5c-.12.04-.24.06-.37.06z'  stroke-width='1' stroke='none' fill='%23ea6a0011'/><path d='M14.39 9.63C18.89 7.5 20.52 1.45 18-3.86c-2.51-5.3-8.22-7.9-12.72-5.77C.79-7.5-.84-1.45 1.67 3.87c1.9 4.04 5.68 6.5 9.37 6.5 1.14 0 2.28-.24 3.35-.74zm1.63-12.56c1.99 4.21.84 8.95-2.57 10.56a5.6 5.6 0 01-2.44.54c-2.84 0-5.82-2-7.35-5.26-2-4.2-.84-8.95 2.57-10.56a5.6 5.6 0 012.44-.54c2.84 0 5.8 2.01 7.35 5.26zm-1.63 122.56c4.5-2.13 6.13-8.18 3.62-13.49-2.51-5.3-8.22-7.9-12.72-5.77-4.5 2.13-6.13 8.18-3.62 13.5 1.9 4.04 5.68 6.5 9.37 6.5 1.14 0 2.28-.24 3.35-.74zm1.63-12.56c1.99 4.21.84 8.95-2.57 10.56a5.6 5.6 0 01-2.44.54c-2.84 0-5.82-2-7.35-5.26-2-4.2-.84-8.95 2.57-10.56a5.6 5.6 0 012.44-.54c2.84 0 5.8 2.01 7.35 5.26z'  stroke-width='1' stroke='none' fill='%23ea6a0011'/></pattern></defs><rect width='800%' height='800%' transform='translate(0,0)' fill='url(%23a)'/></svg>");
background-size:cover;
background-attachment:attachment;
background-reapeat:no-repeat;
}
.scoreBoard h1{
background:#ea6a00;
color:white;
width:fit-content;
font-size: 18px;
padding:12px 15px;
border-radius: 50px;
text-align: center;
border-top:6px solid #fff;
border-bottom:6px solid #fff;
border-left:6px double #fff;
border-right:6px double #fff;
margin:auto auto -60px auto;
position:relative;
top:-38px;
}
.scoreBoard p{
margin:5px auto;
}
.playerCard{
display:flex;
flex-direction:column;
text-align: center;
justify-content: center;
align-items: center;
border-top:6px solid #ea6a00;
border-bottom:6px solid #ea6a00;
border-left:6px double #ea6a00;
border-right:6px double #ea6a00;
border-radius:4px 12px;
box-shadow: 0 0 5px #00000033;
padding:2px 10px;
margin-top:15px;
background-image: url("data:image/svg+xml,<svg id='patternId' width='100%' height='100%' xmlns='http://www.w3.org/2000/svg'><defs><pattern id='a' patternUnits='userSpaceOnUse' width='150' height='150' patternTransform='scale(2) rotate(0)'><rect x='0' y='0' width='100%' height='100%' fill='%23ffffffff'/><path d='M60.92 130.73a6.5 6.5 0 00-8.94-.27l-6.94-7.37a10.67 10.67 0 00-14.66-15.5l-6.9-7.32a6.5 6.5 0 00-.08-9.16 6.52 6.52 0 10-9.24 9.23 6.5 6.5 0 008.9.3l6.9 7.34a10.67 10.67 0 0014.66 15.5l6.94 7.36a6.52 6.52 0 009.36 9.12 6.52 6.52 0 000-9.23zm-42.1-33.29a3.49 3.49 0 01-3.48-3.47c0-1.9 1.57-3.47 3.48-3.47 1.9 0 3.47 1.56 3.47 3.47a3.51 3.51 0 01-3.47 3.47zm19.77 26.99a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zm16.9 13.01a3.49 3.49 0 01-3.47-3.47c0-1.9 1.57-3.47 3.48-3.47 1.9 0 3.47 1.56 3.47 3.47a3.46 3.46 0 01-3.47 3.47zm80.43-6.71a6.53 6.53 0 00-9.16-.08l-6.99-7.33c.08-.08.2-.15.27-.27a10.67 10.67 0 000-15.07 10.61 10.61 0 00-14.89-.16l-6.9-7.32c.07-.04.1-.12.19-.16a6.52 6.52 0 10-9.24-9.23 6.52 6.52 0 008.62 9.77l6.95 7.36a10.67 10.67 0 00.23 14.85 10.64 10.64 0 0014.39.61l6.98 7.4a6.52 6.52 0 009.58 8.85 6.63 6.63 0 00-.03-9.22zM94.8 100.57a3.49 3.49 0 01-3.47-3.47c0-1.9 1.56-3.47 3.47-3.47 1.9 0 3.47 1.56 3.47 3.47a3.51 3.51 0 01-3.47 3.47zm17.67 23.7a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zm18.9 16.3a3.49 3.49 0 01-3.48-3.47c0-1.9 1.57-3.47 3.47-3.47 1.91 0 3.48 1.56 3.48 3.47a3.51 3.51 0 01-3.48 3.47zm-48.82-32.6a10.67 10.67 0 10-15.08 15.1 10.67 10.67 0 0015.08-15.1zm-7.52 16.65a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zm37.44-62.02a12.44 12.44 0 100 24.89 12.44 12.44 0 000-24.9zm-2.21 22.02a7.5 7.5 0 010-14.96 7.5 7.5 0 017.48 7.48 7.52 7.52 0 01-7.48 7.48zm25.65-34.93a6.55 6.55 0 00-8.94-.26l-6.94-7.37a10.67 10.67 0 00-14.66-15.5l-6.9-7.32a6.5 6.5 0 00-.08-9.16 6.52 6.52 0 10-9.24 9.23 6.5 6.5 0 008.9.3l6.9 7.34a10.67 10.67 0 0014.66 15.5l6.94 7.36a6.52 6.52 0 109.36-.12zM92.14 18.13a3.49 3.49 0 01-3.48-3.47c0-1.91 1.57-3.48 3.48-3.48 1.9 0 3.47 1.57 3.47 3.48a3.49 3.49 0 01-3.47 3.47zm21.33 25.04a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zm16.11 14.62a3.49 3.49 0 01-3.47-3.48c0-1.9 1.56-3.47 3.47-3.47 1.9 0 3.47 1.56 3.47 3.47a3.46 3.46 0 01-3.47 3.48zM23.44 130.73a6.52 6.52 0 10-9.24 9.23 6.52 6.52 0 109.24-9.23zm-5.7 9.5a3.49 3.49 0 01-3.47-3.47c0-1.91 1.57-3.48 3.48-3.48 1.9 0 3.47 1.57 3.47 3.48 0 1.9-1.56 3.47-3.47 3.47zm5.7-90.54a6.52 6.52 0 10-9.24 9.24 6.52 6.52 0 109.24-9.24zm-6.46 7.9a3.49 3.49 0 01-3.47-3.47c0-1.9 1.57-3.47 3.47-3.47 1.91 0 3.48 1.56 3.48 3.47 0 1.91-1.57 3.48-3.48 3.48zm43.94-7.9a6.54 6.54 0 00-8.9-.3l-6.94-7.37a10.67 10.67 0 00-14.62-15.5l-6.91-7.32a6.53 6.53 0 10-.42.38l6.9 7.33s-.03 0-.03.04A10.67 10.67 0 0044.66 42.4l6.94 7.37a6.52 6.52 0 109.31-.08zM20.15 19.43a3.49 3.49 0 01-3.47-3.48c0-1.9 1.56-3.47 3.47-3.47 1.91 0 3.48 1.57 3.48 3.47 0 1.91-1.57 3.48-3.48 3.48zM36.41 40.6a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zm20.5 15.42a3.49 3.49 0 01-3.47-3.47c0-1.91 1.56-3.48 3.47-3.48 1.9 0 3.47 1.57 3.47 3.48 0 1.9-1.56 3.47-3.47 3.47zm79 35.08a6.52 6.52 0 10-9.23 9.23 6.52 6.52 0 109.24-9.23zm-4.54 6.49a3.49 3.49 0 01-3.47-3.48c0-1.9 1.57-3.47 3.47-3.47 1.91 0 3.48 1.56 3.48 3.47a3.49 3.49 0 01-3.48 3.48zm4.55-87.56a6.52 6.52 0 10-9.24 9.23 6.52 6.52 0 109.24-9.23zm-3.21 7.02a3.49 3.49 0 01-3.47-3.47c0-1.91 1.56-3.48 3.47-3.48 1.9 0 3.47 1.57 3.47 3.48 0 1.9-1.56 3.47-3.47 3.47zM98.4 49.7a6.52 6.52 0 10-9.24 9.24l.11.12-6.1 6.6a12.44 12.44 0 00-16.9 18.24l-6.12 6.6a6.52 6.52 0 10.76 9.89 6.52 6.52 0 00-.3-9.5l6.1-6.57a12.44 12.44 0 0020.76-9.24c.01-3.54-1.48-6.71-3.84-8.96l6.14-6.6a6.5 6.5 0 008.67-.5 6.65 6.65 0 00-.04-9.32zM61.07 96.76c0 1.9-1.57 3.47-3.47 3.47a3.49 3.49 0 01-3.48-3.47c0-1.91 1.57-3.48 3.48-3.48a3.44 3.44 0 013.47 3.48zM72.9 79.73a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zM94.8 56.5a3.49 3.49 0 01-3.46-3.47c0-1.91 1.56-3.48 3.47-3.48 1.9 0 3.47 1.57 3.47 3.48 0 1.9-1.56 3.47-3.47 3.47zm3.6 74.24a6.52 6.52 0 10-9.24 9.23 6.52 6.52 0 109.24-9.23zm-4.62 6.37a3.49 3.49 0 01-3.47-3.47c0-1.91 1.56-3.48 3.47-3.48 1.9 0 3.47 1.57 3.47 3.48 0 1.9-1.56 3.47-3.47 3.47zM60.92 10.04a6.52 6.52 0 10-9.24 9.23 6.52 6.52 0 109.24-9.23zm-4.62 6.22a3.49 3.49 0 01-3.48-3.47c0-1.91 1.57-3.48 3.48-3.48 1.9 0 3.47 1.57 3.47 3.48 0 1.9-1.56 3.47-3.47 3.47zm26.26 10.69a10.67 10.67 0 10-15.08 15.09 10.67 10.67 0 0015.08-15.1zm-6.64 14.08a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zM37.52 62.6a12.44 12.44 0 100 24.89 12.44 12.44 0 000-24.9zM35.42 85a7.5 7.5 0 010-14.96 7.5 7.5 0 010 14.96zm102.14-10c0 6.87 5.57 12.44 12.44 12.44V62.6A12.44 12.44 0 00137.56 75zM0 62.6v24.84c6.87 0 12.63-5.57 12.63-12.44A12.63 12.63 0 000 62.6zM116.37 3.9a5.49 5.49 0 001.6-3.9h-10.95a5.49 5.49 0 009.35 3.9zm-37.48 0A5.49 5.49 0 0080.5 0H69.55a5.49 5.49 0 009.35 3.9zm-37.52 0a5.49 5.49 0 001.6-3.9H32.03a5.49 5.49 0 009.35 3.9zM144.5 0a5.49 5.49 0 005.5 5.53V0zM5.5 0H0v5.53A5.52 5.52 0 005.5 0zm2.06 26.95c-2.1-2.1-4.85-3.1-7.56-3.1V45.2c2.75 0 5.5-1.07 7.56-3.17a10.67 10.67 0 000-15.07zm134.88 15.11c2.06 2.1 4.81 3.13 7.56 3.13V23.86a10.67 10.67 0 00-7.56 18.2zm-33.81 104.05a5.49 5.49 0 00-1.6 3.89h10.95a5.49 5.49 0 00-9.35-3.9zm-37.48 0a5.49 5.49 0 00-1.6 3.89H80.5a5.49 5.49 0 00-9.35-3.9zm-37.52 0a5.49 5.49 0 00-1.6 3.89h10.95a5.49 5.49 0 00-9.35-3.9zM144.5 150h5.5v-5.5a5.49 5.49 0 00-5.5 5.5zM0 144.5v5.5h5.53c0-1.41-.53-2.79-1.6-3.9A5.71 5.71 0 000 144.5zm0-39.61v21.33a10.67 10.67 0 100-21.34zm142.44 18.2a10.6 10.6 0 007.56 3.13V104.9a10.67 10.67 0 00-7.56 18.2z'  stroke-width='1' stroke='none' fill='%23ea6a0011'/></pattern></defs><rect width='800%' height='800%' transform='translate(0,0)' fill='url(%23a)'/></svg>");
background-size:cover;
background-attachment:attachment;
background-reapeat:no-repeat;
}
.playerCard i{
background:#ea6a00;
color:white;
width:fit-content;
font-size: 60px;
padding:12px 15px;
border-radius: 50px;
text-align: center;
border-top:6px solid #fff;
border-bottom:6px solid #fff;
border-left:6px double #fff;
border-right:6px double #fff;
margin:auto auto -20px auto;
position:relative;
top:-35px;
}
#shuffleAnimation{
display:flex;
flex-direction:column;
text-align: center;
justify-content: center;
margin:60px auto 20px auto;
background-image: url("data:image/svg+xml,<svg id='patternId' width='100%' height='100%' xmlns='http://www.w3.org/2000/svg'><defs><pattern id='a' patternUnits='userSpaceOnUse' width='50' height='50' patternTransform='scale(2) rotate(0)'><rect x='0' y='0' width='100%' height='100%' fill='%23ffffffff'/><path d='M36.445 4.336c3.047-1.484 5.808-1.953 8.282-1.406.208.026.377.13.507.312l.118.586c-.495 2.5-2.045 4.857-4.649 7.07l-.351.157c-1.823.312-3.243-.3-4.258-1.836h-.04c-.963-1.51-.95-3.034.04-4.57l.351-.313M50 23.125c-1.823-1.224-3.307-3.138-4.453-5.742l-.078-.39c.182-1.824 1.146-3.022 2.89-3.595L50 13.203v9.922M29.766 0c-1.302 1.875-3.373 3.346-6.211 4.414l-.39.04c-1.824-.287-2.97-1.329-3.438-3.126L19.609 0h10.157M0 13.203c1.042.026 1.98.508 2.812 1.445l.196.391c.625 3.333.351 6.12-.82 8.36l-.47.39-.585-.039L0 23.086v-9.883M19.61 50c.051-1.172.611-2.174 1.68-3.008l.39-.156c3.385-.417 6.146.039 8.28 1.367l.352.469-.078.586-.468.742H19.609m17.54-18.36c-.652-1.692-.326-3.19.976-4.492a.68.68 0 01.352-.195c3.307-.86 6.106-.755 8.398.313l.43.43v.585c-.99 2.37-2.982 4.35-5.977 5.938l-.39.078c-1.876-.052-3.139-.925-3.79-2.617v-.04m7.883 15.43c-3.411.313-6.172-.247-8.281-1.68a.713.713 0 01-.313-.507.657.657 0 01.079-.547c1.354-2.188 3.658-3.815 6.914-4.883h.39c1.823.339 2.93 1.406 3.32 3.203.34 1.797-.234 3.23-1.718 4.297l-.39.117m-10.93-13.086c1.822.365 2.93 1.446 3.32 3.243v.039c.312 1.77-.287 3.19-1.797 4.257l-.39.118c-3.438.26-6.186-.339-8.243-1.797a.713.713 0 01-.312-.508.765.765 0 01.078-.586c1.38-2.161 3.698-3.75 6.953-4.766h.39M10.86 6.054c-2.03 2.709-4.283 4.389-6.757 5.04l-.586-.078-.352-.47c-.73-2.447-.417-5.233.938-8.358l.234-.313c1.51-1.12 3.047-1.237 4.61-.352h.038c1.589.964 2.266 2.357 2.032 4.18l-.157.352m2.149 11.836c-.912-3.282-.886-6.081.078-8.399a.713.713 0 01.39-.43c.183-.104.378-.104.587 0 2.395.886 4.44 2.813 6.132 5.782l.078.39c0 1.823-.833 3.112-2.5 3.868-1.692.65-3.203.364-4.53-.86l-.235-.351m22.383-3.868c.234 3.36-.352 6.094-1.758 8.204l-.508.351-.586-.117c-2.161-1.38-3.763-3.685-4.805-6.914v-.39c.365-1.824 1.433-2.917 3.204-3.282h.039c1.77-.339 3.19.247 4.257 1.758l.157.39M1.68 43.008c2.552-2.24 5.09-3.425 7.617-3.555l.547.195.273.547c.209 2.552-.65 5.222-2.578 8.008l-.312.234c-1.693.808-3.23.612-4.61-.585-1.354-1.25-1.745-2.748-1.172-4.493l.235-.351m9.922-10.82c-3.386-.652-5.886-1.954-7.5-3.907a.63.63 0 01-.196-.547.794.794 0 01.274-.547c1.9-1.718 4.557-2.656 7.968-2.812.157 0 .3.04.43.117 1.615.834 2.37 2.162 2.266 3.985v.039c-.156 1.823-1.107 3.033-2.852 3.632l-.39.04m13.437-10.743c3.177 1.172 5.417 2.839 6.719 5l.117.586-.352.469c-2.135 1.432-4.882 1.94-8.242 1.523l-.39-.156c-1.485-1.12-2.032-2.565-1.641-4.336v-.039c.443-1.77 1.576-2.8 3.398-3.086l.391.04m-7.773 14.452c1.744-.677 3.255-.39 4.53.86h.04c1.25 1.302 1.55 2.825.898 4.57l-.273.313c-2.682 2.083-5.287 3.112-7.813 3.086l-.546-.196a.75.75 0 01-.235-.547c-.078-2.578.95-5.195 3.086-7.851l.313-.235'  stroke-width='1' stroke='none' fill='%23eb6a0011'/></pattern></defs><rect width='800%' height='800%' transform='translate(0,0)' fill='url(%23a)'/></svg>");
background-size:cover;
background-attachment:attachment;
background-reapeat:no-repeat;
width:200px;
height:200px;
border-radius: 100px;
border:8px double #ea6a00;
border-right-style:solid;
border-left-style:solid;
border-top-style:double;
border-bottom-style:double;
color:#ea6a00;
font-weight: bold;
}
@keyframes borderAn{
0%{
border-right-style:solid;
border-left-style:solid;
border-top-style:double;
border-bottom-style:double;
}
50%{
border-top-style:solid;
border-bottom-style:solid;
border-right-style:double;
border-left-style:double;
}
100%{
border-right-style:solid;
border-left-style:solid;
border-top-style:double;
border-bottom-style:double;
}
}
@keyframes textAn{
0%{
transform: scale(1);
}
50%{
transform: scale(0.85);
}
100%{
transform: scale(1);
}
}
.confirm-btn{
background-color:#ea6a00;
}
.confirm-btn-fc{
background-color:#DC3545;
}
.cancel-btn{
background-color:#28A745;
}
.swal2-popup .swal2-styled:focus {
    box-shadow: none !important;
}
.swal2-icon.swal2-warning{
color:#ea6a00;
border-color:#ea6a00;
}
</style>
</head>
<body>
    <h1 style="font-size:28px;">لعبة برا السالفة</h1>
    <div style="font-weight:bold;">
        <label for="jesterToggle"><i class="fas fa-user-astronaut"></i>&nbsp; تفعيل اللعاب:</label>
        <input type="checkbox" id="jesterToggle">
    </div>
    <h2 style="margin-bottom:7px; text-align:right;">اللاعبين:</h2>
    <div style="display:grid; grid-template-columns:1fr 1fr; grid-gap:5px;"><input type="text" placeholder="أدخل اسم اللاعب..." id="playerInput">
    <button id="addUser" style="width:20%; border-radius: 4px; height:42px;"><i class="fas fa-user-plus"></i></button></div>
  <br><br>
<div id="playerContainer" style="margin-top:-55px;"></div>
  <h2 style="margin:45px auto 7px auto; text-align:right;">السوالف:</h2>
    <div class="contexts">
        <div data-name="drinks"><img src="https://j.top4top.io/p_3305usogj1.png" class="cover" loading="lazy"></img>مشروبات</div>
        <div data-name="animals"><img src="https://i.top4top.io/p_33058k45u0.png" class="cover" loading="lazy"></img>حيوانات</div>
        <div data-name="clothes"><img src="https://k.top4top.io/p_3305ga0j72.png" class="cover" loading="lazy"></img>ملابس</div>
        <div data-name="places"><img src="https://l.top4top.io/p_3305cvpwi3.png" class="cover" loading="lazy"></img>أماكن</div>
<div data-name="foods"><img src="https://b.top4top.io/p_3305tmzqf5.png" class="cover" loading="lazy"></img>أكلات</div>
<div data-name="fruitsAndVegetables"><img src="https://a.top4top.io/p_33054os254.png" class="cover" loading="lazy"></img>فواكه وخضار</div>
<div data-name="schoolSubjects"><img src="https://c.top4top.io/p_33053fjju6.png" class="cover" loading="lazy"></img>مواد دراسية</div>
<div data-name="scientists"><img src="https://d.top4top.io/p_33059sz8j7.png" class="cover" loading="lazy"></img>علماء</div>
</div>
    <script>
        const animals = [
            { "context": "ضفدع", "hint": "الحيوان صغير الحجم" },
            { "context": "قرد", "hint": "الحيوان من الثدييات" },
            { "context": "أسد", "hint": "الحيوان من الثدييات" },
            { "context": "كنغر", "hint": "الحيوان من الثدييات" },
            { "context": "قطة", "hint": "الحيوان من الثدييات" },
            { "context": "كلب", "hint": "الحيوان من الثدييات" },
            { "context": "بومة", "hint": "الحيوان من الطيور" },
            { "context": "صقر", "hint": "الحيوان من الطيور" },
            { "context": "جمل", "hint": "الحيوان من الثدييات" },
            { "context": "حمار", "hint": "الحيوان من الثدييات" },
            { "context": "غزال", "hint": "الحيوان من الثدييات" },
            { "context": "ضب", "hint": "الحيوان صغير الحجم" },
            { "context": "حرباء", "hint": "الحيوان صغير الحجم" },
            { "context": "سلطعون", "hint": "الحيوان صغير الحجم" },
            { "context": "بطة", "hint": "الحيوان من الطيور" },
            { "context": "حمامة", "hint": "الحيوان من الطيور" },
            { "context": "دجاجة", "hint": "الحيوان من الطيور" },
            { "context": "عصفور", "hint": "الحيوان من الطيور" },
            { "context": "فأر", "hint": "الحيوان صغير الحجم" },
            { "context": "أرنب", "hint": "الحيوان من الثدييات" }
        ];
        const clothes = [
            { "context": "قميص", "hint": "اللبس يلبسه الرجال" },
            { "context": "فستان", "hint": "اللبس تلبسه النساء" },
            { "context": "سروال", "hint": "اللبس للجنسين" },
            { "context": "معطف", "hint": "اللبس للجنسين" },
            { "context": "حذاء", "hint": "اللبس للجنسين" },
            { "context": "قبعة", "hint": "اللبس للجنسين" },
            { "context": "ثوب", "hint": "اللبس يلبسه الرجال" },
            { "context": "بلوزة", "hint": "اللبس تلبسه النساء" },
            { "context": "بشت (مشلح)", "hint": "اللبس يلبسه الرجال" },
            { "context": "شماغ", "hint": "اللبس يلبسه الرجال" },
            { "context": "عقال", "hint": "اللبس يلبسه الرجال" },
            { "context": "عباية", "hint": "اللبس تلبسه النساء" },
            { "context": "جورب", "hint": "اللبس للجنسين" },
            { "context": "فروة", "hint": "اللبس للجنسين" },
            { "context": "طوق شعر", "hint": "اللبس تلبسه النساء" },
            { "context": "سوارة", "hint": "اللبس تلبسه النساء" },
            { "context": "تنورة", "hint": "اللبس تلبسه النساء" },
            { "context": "شبشب", "hint": "اللبس يلبسه الرجال" },
            { "context": "طاقية", "hint": "اللبس يلبسه الرجال" },
            { "context": "مريول", "hint": "اللبس تلبسه النساء" }
        ];
        const places = [
            { "context": "مكتبة", "hint": "مكان موجود في كل بلد" },
            { "context": "مدرسة", "hint": "مكان موجود في كل بلد" },
            { "context": "مطعم", "hint": "مكان موجود في كل بلد" },
            { "context": "حديقة", "hint": "مكان موجود في كل بلد" },
            { "context": "مستشفى", "hint": "مكان موجود في كل بلد" },
            { "context": "فندق", "hint": "مكان موجود في كل بلد" },
            { "context": "متحف", "hint": "مكان موجود في كل بلد" },
            { "context": "محطة قطار", "hint": "مكان موجود في كل بلد" },
            { "context": "صيدلية", "hint": "مكان موجود في كل بلد" },
            { "context": "شاطئ", "hint": "مكان للاستمتاع بالشمس والماء" },
            { "context": "برج إيفل", "hint": "معلم سياحي" },
            { "context": "برج خليفة", "hint": "معلم سياحي" },
            { "context": "برج بيزا المائل", "hint": "معلم سياحي" },
            { "context": "الأهرامات", "hint": "معلم سياحي" },
            { "context": "برج المملكة", "hint": "معلم سياحي" },
            { "context": "برج الفيصلية", "hint": "معلم سياحي" },
            { "context": "سور الصين العظيم", "hint": "معلم سياحي" },
            { "context": "حديقة حيوان", "hint": "مكان موجود في كل بلد" },
            { "context": "وزارة", "hint": "مكان موجود في كل بلد" },
            { "context": "بنك", "hint": "مكان موجود في كل بلد" }
        ];
        const drinks = [
    { "context": "ماء", "hint": "" },
    { "context": "شاي", "hint": "" },
    { "context": "قهوة", "hint": "" },
    { "context": "عصير", "hint": "" },
    { "context": "حليب", "hint": "" },
    { "context": "شاي كرك", "hint": "" },
    { "context": "مشروب غازي", "hint": "" },
    { "context": "عصير ليمون", "hint": "" },
    { "context": "شوكولاتة ساخنة", "hint": " " },
    { "context": "عصير رمان", "hint": "" },
    { "context": "موكا", "hint": "" },
    { "context": "كابتشينو", "hint": "" },
    { "context": "شاي أخضر", "hint": "" },
    { "context": "شاي بالنعناع", "hint": "" },
    { "context": "إسبريسو", "hint": "" },
    { "context": "لاتيه", "hint": "" },
    { "context": "مشروب طاقة", "hint": "" },
    { "context": "عصير جزر وبرتقال", "hint": "" },
    { "context": "عصير فواكه مشكلة", "hint": "" },
    { "context": "ميلك شيك", "hint": "" }
];

const foods = [
    { "context": "بيتزا", "hint": "" },
    { "context": "برجر", "hint": "" },
    { "context": "معكرونة", "hint": "" },
    { "context": "سوشي", "hint": "" },
    { "context": "فول", "hint": "" },
    { "context": "كباب", "hint": "" },
    { "context": "شاورما", "hint": "" },
    { "context": "فطيرة", "hint": "" },
    { "context": "سلطة", "hint": "" },
    { "context": "بطاطس مقلية", "hint": "" },
    { "context": "عدس", "hint": "" },
    { "context": "سمك مشوي", "hint": "" },
    { "context": "كبسة", "hint": "" },
    { "context": "مرقوق", "hint": "" },
    { "context": "جريش", "hint": "" },
    { "context": "كودو", "hint": "" },
    { "context": "تاكو", "hint": "" },
    { "context": "شطيرة بالتونة", "hint": "" },
    { "context": "كعك", "hint": "" },
    { "context": "دونات", "hint": "" }
];

const fruitsAndVegetables = [
    { "context": "تفاح", "hint": "" },
    { "context": "موز", "hint": "" },
    { "context": "برتقال", "hint": "" },
    { "context": "فراولة", "hint": "" },
    { "context": "عنب", "hint": "" },
    { "context": "مانجو", "hint": "" },
    { "context": "أناناس", "hint": "" },
    { "context": "كيوي", "hint": "" },
    { "context": "خوخ", "hint": "" },
    { "context": "بطيخ", "hint": "" },
    { "context": "طماطم", "hint": "" },
    { "context": "خيار", "hint": "" },
    { "context": "جزر", "hint": "" },
    { "context": "بروكلي", "hint": "" },
    { "context": "سبانخ", "hint": "" },
    { "context": "بصل", "hint": "" },
    { "context": "ثوم", "hint": "" },
    { "context": "فلفل", "hint": "" },
    { "context": "بطاطا", "hint": "" },
    { "context": "ذرة", "hint": "" }
];

const scientists = [
    { "context": "ابن سينا", "hint": "" },
    { "context": "الخوارزمي", "hint": "" },
    { "context": "ابن الهيثم", "hint": "" },
    { "context": "جابر بن حيان", "hint": "" },
    { "context": "الرازي", "hint": "" },
    { "context": "مندل", "hint": "" },
    { "context": "ابن النفيس", "hint": "" },
    { "context": "أينشتاين", "hint": "" },
    { "context": "الزهراوي", "hint": "" },
    { "context": "نيوتن", "hint": "" }
];

const schoolSubjects = [
    { "context": "الرياضيات", "hint": "" },
    { "context": "اللغة العربية", "hint": "" },
    { "context": "العلوم", "hint": "" },
    { "context": "التاريخ", "hint": "" },
    { "context": "الجغرافيا", "hint": "" },
    { "context": "الفيزياء", "hint": "" },
    { "context": "الكيمياء", "hint": "" },
    { "context": "اللغة الإنجليزية", "hint": "" },
    { "context": "التربية الإسلامية", "hint": "" },
    { "context": "الفقه", "hint": "" },
    { "context": "التوحيد", "hint": "" },
    { "context": "الحديث", "hint": "" },
    { "context": "التفسير", "hint": "" },
    { "context": "التربية البدنية", "hint": "" },
    { "context": "المواطنة الرقمية", "hint": "" },
    { "context": "الحاسب الآلي", "hint": "" },
    { "context": "الأحياء", "hint": "" },
    { "context": "الفنون", "hint": "" }
];

function exitRoundAlert(){
Swal.fire({
    title: 'متأكدين تبغون تخرجون من اللعبة؟',
    text: "إذا خرجتم، بتخسرون التقدم الحالي.",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonText: 'نعم',
    cancelButtonText: 'لا',
    customClass: {
        confirmButton: 'confirm-btn-fc',
        cancelButton: 'cancel-btn'
    }
}).then((result) => {
    if (result.isConfirmed) {
        location.reload();
    }
});
}

function exitGameAlert(){
Swal.fire({
    title: 'متأكدين تبغون تخرجون من اللعبة؟',
    text: "إذا خرجتم، بتخسرون التقدم الحالي، وبتتصفر النقاط حقتكم!",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonText: 'نعم',
    cancelButtonText: 'لا',
    customClass: {
        confirmButton: 'confirm-btn-fc',
        cancelButton: 'cancel-btn'
    }
}).then((result) => {
    if (result.isConfirmed) {
        localStorage.removeItem('scores');
location.reload();
    }
});
}


        const contexts = document.querySelectorAll('.contexts div');
const playerContainer = document.getElementById('playerContainer');

// Load players from local storage
const loadPlayers = () => {
    const players = JSON.parse(localStorage.getItem('players')) || [];
    players.forEach(player => {
        addPlayerLabel(player);
    });
};

// Add player label function
const addPlayerLabel = (playerName) => {
    let playerLabel = document.createElement("label");
    playerLabel.classList.add("player-label");
    playerLabel.innerHTML = `<i class="fas fa-user-circle" style="font-size: 22px; right:5px;"></i> ${playerName} <i class="fas fa-user-minus"></i>`;
    playerContainer.appendChild(playerLabel);

    // Add remove functionality
    playerLabel.querySelector(".fa-user-minus").addEventListener("click", function() {
        removePlayer(playerName, playerLabel);
    });
};

// Remove player from local storage and UI
const removePlayer = (playerName, playerLabel) => {
    let players = JSON.parse(localStorage.getItem('players')) || [];
    players = players.filter(player => player !== playerName);
    localStorage.setItem('players', JSON.stringify(players));
    playerContainer.removeChild(playerLabel);
};

// Save player to local storage
const savePlayerToLocal = (playerName) => {
    let players = JSON.parse(localStorage.getItem('players')) || [];
    players.push(playerName);
    localStorage.setItem('players', JSON.stringify(players));
};

// Load Jester Mode state from localStorage
const loadJesterMode = () => {
    const jesterMode = localStorage.getItem('jesterMode') === 'true';
    document.getElementById('jesterToggle').checked = jesterMode;
    return jesterMode;
};

// Save Jester Mode state to localStorage
const saveJesterMode = (enabled) => {
    localStorage.setItem('jesterMode', enabled);
};

// Event listener for the toggle button
document.getElementById('jesterToggle').addEventListener('change', function() {
    saveJesterMode(this.checked);
    location.reload(); // Reload the page when toggled
});

// Load Jester Mode state on page load
let isJesterModeEnabled = loadJesterMode();

// Function to select a random Jester player
const selectJesterPlayer = (players) => {
    const jesterIndex = Math.floor(Math.random() * players.length);
    return players[jesterIndex];
};

// Original code
document.getElementById("addUser").addEventListener("click", function () {
    let newPlayerName = document.getElementById('playerInput').value;
    if (newPlayerName) {
        addPlayerLabel(newPlayerName);
        savePlayerToLocal(newPlayerName);
        document.getElementById('playerInput').value = ''; // Clear input
    }
});

// Add Enter key functionality without changing the original code
document.getElementById("playerInput").addEventListener("keydown", function (event) {
    if (event.key === "Enter") { // Check if the key pressed is Enter
        // Trigger the button click programmatically
        document.getElementById("addUser").click();
    }
});

// Load existing players and scores on page load
loadPlayers();
const savedScores = JSON.parse(localStorage.getItem('scores')) || {};

// Event listener for context clicks
contexts.forEach((context) => {
    context.addEventListener('click', function () {
        let players = JSON.parse(localStorage.getItem('players')) || [];

        // Check if there are any players
        if (players.length < 3) {
            Swal.fire({
        title: 'تنبيه!',
        text: 'يجب أن يكون عدد اللاعبين على الأقل ثلاثة لاعبين!',
        icon: 'warning',
        confirmButtonText: 'حسنٌ',
customClass:{
confirmButton: 'confirm-btn'
}
    });
            return; // Exit if no players are available
        }

        // Get the selected context (animals, clothes, places, or drinks)
        const selectedContext = context.getAttribute('data-name');
        let contextData;

        // Assign the correct JSON array based on the selected context
        switch (selectedContext) {
    case 'animals':
        contextData = animals;
        break;
    case 'clothes':
        contextData = clothes;
        break;
    case 'places':
        contextData = places;
        break;
    case 'drinks':
        contextData = drinks;
        break;
    case 'fruitsAndVegetables':
        contextData = fruitsAndVegetables;
        break;
    case 'foods':
        contextData = foods;
        break;
    case 'scientists':
        contextData = scientists;
        break;
    case 'schoolSubjects':
        contextData = schoolSubjects;
        break;
    default:
        Swal.fire({
            title: 'خطأ!',
            text: 'ما فيه سالفة زي كذا!',
            icon: 'error',
            confirmButtonText: 'حسنٌ',
            customClass: {
                confirmButton: 'confirm-btn'
            }
        });
        return;
}

        // Randomize the context once at the start of the game
        const randomContextIndex = Math.floor(Math.random() * contextData.length);
        const selectedContextItem = contextData[randomContextIndex];

        // Randomly select one player to be "out of the context"
        const outOfContextPlayerIndex = Math.floor(Math.random() * players.length);
        const outOfContextPlayer = players[outOfContextPlayerIndex];

        // Select a random Jester player if Jester Mode is enabled
        let jesterPlayer = null;
        if (isJesterModeEnabled) {
            // Ensure the Jester is not the same as the out-of-context player
            let jesterCandidate;
            do {
                jesterCandidate = selectJesterPlayer(players);
            } while (jesterCandidate === outOfContextPlayer);
            jesterPlayer = jesterCandidate;
        }

        // Create a copy of the players array to keep track of remaining players
        let remainingPlayers = [...players];

        // Object to store votes
        const votes = {};
        players.forEach(player => votes[player] = 0); // Initialize votes to 0

        // Object to store scores (load existing scores or initialize to 0)
        const scores = {};
        players.forEach(player => {
            scores[player] = savedScores[player] || 0; // Use saved scores or default to 0
        });

        // Function to show the "in/out of context" page for each player
        function showInOutOfContextPage(player) {
            const isOutOfContextPlayer = player === outOfContextPlayer;
            const isJester = player === jesterPlayer;
            document.body.innerHTML = `
                <h1 style="margin-bottom:4px;">أعطوا الجوال ل${player.startsWith("ال") ? "ل" + player.slice(2) : player}!</h1>
<p style="text-align:center;">اضغط التالي عشان تعرف إذا أنت برا السالفة ولا لا..</p>
                <button id="nextPlayer">التالي</button>
<button class="exitRound" onclick="exitRoundAlert()">خروج</button>
            `;

            // Add event listener to the "التالي" button
            document.getElementById("nextPlayer").addEventListener("click", function () {
                if (isJester) {
                    // Show the Jester page
                    document.body.innerHTML = `
                        <div class="playerCard">
<i class="fas fa-user-astronaut"></i>
<h1>${player} أنت اللعاب!</h1>
                        <p>والسالفة عن: <b>${selectedContextItem.context}</b>.</p>
<p>لا نوصيك العب عليهم صح، يعني سو نفسك برا السالفة، وتذكر أن أي صوت يجي عليك بتأخذ ٥٠ نقطة!</p>
</div>
                        <br>
                        <button id="nextPlayerBtn">التالي</button>
<button class="exitRound" onclick="exitRoundAlert()">خروج</button>
                    `;
                } else if (isOutOfContextPlayer) {
                    // Show the "out of context" message
                    document.body.innerHTML = `
<div class="playerCard">
<i class="fas fa-user-secret"></i>
                        <h2>${player} أنت برا السالفة!</h2>
<p>حاول تعرف السالفة من أسئلة البقية! ولا تنسَ أي تصويت ما يجي عليك بتأخذ عليه ٥٠ نقطة! ولو
 عرفت السالفة وتوقعتعا صح بتأخذ ١٠٠ نقطة!</p>
                        <!-- <p>تلميح السالفة عن: <b>${selectedContextItem.hint}</b>.</p> -->
</div>
                        <br>
                        <button id="nextPlayerBtn">التالي</button>
<button class="exitRound" onclick="exitRoundAlert()">خروج</button>
                    `;
                } else {
                    // Show the "in context" message
                    document.body.innerHTML = `
<div class="playerCard">
<i class="fas fa-user-tie"></i>
                        <h2>${player} أنت داخل في السالفة!</h2>
                        <p>والسالفة عن: <b>${selectedContextItem.context}</b>.</p>
<p>اسأل البقية أسئلة ذكية بحيث أنك تصيد اللي برا السالفة وفي نفس الوقت ما تخليه يدري وش السالفة، وتذكر أنك لما تصيد اللي برا السالفة وتصوت عليه بتأخذ ١٠٠ نقطة.</p></div>
                        <br>
                        <button id="nextPlayerBtn">التالي</button>
<button class="exitRound" onclick="exitRoundAlert()">خروج</button>
                    `;
                }

                // Add event listener to the "التالي" button for the next player
                document.getElementById("nextPlayerBtn").addEventListener("click", selectNextPlayer);
            });
        }

        // Function to select the next player and update the UI
        function selectNextPlayer() {
            if (remainingPlayers.length === 0) {
                // If all players have been selected, show the questions UI
                startQuestionsPhase();
                return; // Exit the function
            }

            const indexOfPlayer = Math.floor(Math.random() * remainingPlayers.length);
            const selectedPlayer = remainingPlayers[indexOfPlayer];

            // Remove the selected player from the remaining players list
            remainingPlayers.splice(indexOfPlayer, 1);

            // Show the "in/out of context" page for the selected player
            showInOutOfContextPage(selectedPlayer);
        }

       let questionPairs = []; // To store all possible pairs
let currentPairIndex = 0; // To track the current pair being asked

// Function to start the questions phase
function startQuestionsPhase() {
    // Generate all possible pairs
    generateQuestionPairs();
    shuffleArray(questionPairs); // Shuffle the pairs
    // Re-shuffle the array to ensure randomness
    for (let i = 0; i < 5; i++) {
        shuffleArray(questionPairs);
    }
    selectNextQuestionPair(); // Start the questioning
}

// Function to generate all possible question pairs
function generateQuestionPairs() {
    for (let asker of players) {
        for (let answerer of players) {
            if (asker !== answerer) {
                questionPairs.push({ asker, answerer });
            }
        }
    }
}

// Function to shuffle an array (Fisher-Yates Shuffle)
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]]; // Swap
    }
}

// Function to select the next pair of players for questions
function selectNextQuestionPair() {
    if (currentPairIndex >= questionPairs.length) {
        document.body.innerHTML = `
            <h1 style="margin-bottom:-7px;">إذا تبغون تسألون أي أحد اسألوا أو خلاص روحوا على التصويت!</h1>
            <br>
            <button id="voteBtn">تصويت</button>
            <button class="exitRound" onclick="exitRoundAlert()">خروج</button>
        `;

        // Add event listener to the vote button
        document.getElementById("voteBtn").addEventListener("click", startVoting);
        return; // Exit the function
    }

    // Get the current pair
    const { asker, answerer } = questionPairs[currentPairIndex];

    // Show the question prompt
    showQuestionPrompt(asker, answerer);

    // Move to the next pair
    currentPairIndex++;
}

// Function to show the question prompt
function showQuestionPrompt(asker, answerer) {
    // Update the UI
    document.body.innerHTML = `
        <h1 style="margin-bottom:-7px;">${asker} اسأل ${answerer}!</h1>
        <br>
        <button id="nextQuestion">التالي</button>
        <button class="exitRound" onclick="exitRoundAlert()">خروج</button>
    `;

    // Add event listener to the "التالي" button
    document.getElementById("nextQuestion").addEventListener("click", function () {
        // Move to the next question pair
        selectNextQuestionPair();
    });
}

        // Function to start the voting process
        function startVoting() {
            let votingPlayers = [...players]; // Copy of players for voting
            let currentVoterIndex = 0;

            function showVotingUI() {
                if (currentVoterIndex >= votingPlayers.length) {
                    // If all players have voted, show the competition animation
                    showCompetitionAnimation();
                    return;
                }

                const currentVoter = votingPlayers[currentVoterIndex];

                // Shuffle the players for voting (excluding the current voter)
                const shuffledPlayers = shuffleArray(players.filter(player => player !== currentVoter));

                // Update the UI for the current voter
                document.body.innerHTML = `
                    <h1 style="margin-bottom:-4px;">${currentVoter} من تتوقع أنه برا السالفة؟</h1>
                    <br>
                    <div class="gridBtns">${shuffledPlayers.map(player => `<button class="voteBtn" data-player="${player}">${player}</button>`).join('')}</div>
<button class="exitRound" onclick="exitRoundAlert()">خروج</button>
                `;

                // Add event listeners to the voting buttons
                document.querySelectorAll(".voteBtn").forEach(button => {
                    button.addEventListener("click", function () {
                        const votedPlayer = button.getAttribute("data-player");

                        // Check if the voted player is the "out of context" player
                        if (votedPlayer === outOfContextPlayer) {
                            scores[currentVoter] += 100; // Add 100 points for correct vote
                        } else {
                            // If the vote is wrong (i.e., not for the out-of-context player)
                            // AND the current voter is NOT the out-of-context player,
                            // award 50 points to the out-of-context player
                            if (currentVoter !== outOfContextPlayer) {
                                scores[outOfContextPlayer] += 50; // Add 50 points for wrong vote
                            }

                            // Check if the voted player is the Jester
                            if (isJesterModeEnabled && votedPlayer === jesterPlayer) {
                                scores[jesterPlayer] += 50; // Add 50 points to the Jester for each wrong vote
                            }
                        }

                        // Move to the next voter
                        currentVoterIndex++;
                        showVotingUI();
                    });
                });
            }

            // Start the voting process
            showVotingUI();
        }

        // Function to show the competition animation
        function showCompetitionAnimation() {
            // Display the initial UI
            document.body.innerHTML = `
                <h1>اللي برا السالفة هو:</h1>
                <div id="shuffleAnimation">
                    <span id="randomName"></span>
                </div>
                <br>
                <button id="revealBtn" style="display: none;">التالي</button>
<button class="exitRound" onclick="exitRoundAlert()">خروج</button>
            `;

            const shuffleAnimation = document.getElementById("shuffleAnimation");
            const randomNameElement = document.getElementById("randomName");
            const revealBtn = document.getElementById("revealBtn");

            let shuffleInterval;
            let stopShuffleTimeout;

            // Function to display a random player name
            function displayRandomName() {
                const randomIndex = Math.floor(Math.random() * players.length);
                randomNameElement.textContent = players[randomIndex];
            }

            // Start the shuffle animation
            shuffleInterval = setInterval(displayRandomName, 100);

            stopShuffleTimeout = setTimeout(() => {
                clearInterval(shuffleInterval); // Stop the shuffle
                randomNameElement.textContent = outOfContextPlayer; // Show the out of context player
randomNameElement.style.animation = "textAn 3s infinite linear";
                revealBtn.style.display = "block"; // Show the reveal button
            }, 3000);

            // Add event listener to the reveal button
            revealBtn.addEventListener("click", function () {
                // Stop the animation and reveal the "out of context" player
                clearInterval(shuffleInterval);
                clearTimeout(stopShuffleTimeout);
                randomNameElement.textContent = outOfContextPlayer;
                showGuessPage();
            });
        }

function showGuessPage() {
    // Generate 6 random wrong answers and 1 correct answer
    const wrongAnswers = shuffleArray(contextData.filter(item => item !== selectedContextItem)).slice(0, 6);
    const correctAnswer = selectedContextItem.context;

    // Generate all answers (wrong answers)
    const allAnswers = wrongAnswers.map(item => item.context);

    // Generate a random index between 0 and 6
    const randomIndex = Math.floor(Math.random() * 7);

    // Insert the correct answer at the random index
    allAnswers.splice(randomIndex, 0, correctAnswer);

    // Update the UI for the guess page
    document.body.innerHTML = `
        <h1 style="margin-bottom:-7px;">${outOfContextPlayer} وش تتوقع كانت السالفة؟</h1>
        <br>
        <div class="gridBtns">${allAnswers.map(answer => `<button class="guessBtn" data-answer="${answer}">${answer}</button>`).join('')}</div>
<button class="exitRound" onclick="exitRoundAlert()">خروج</button>
    `;

    // Add event listeners to the guess buttons
    document.querySelectorAll(".guessBtn").forEach(button => {
        button.addEventListener("click", function () {
            const guessedAnswer = button.getAttribute("data-answer");

            // Check if the guessed answer is correct
            if (guessedAnswer === correctAnswer) {
this.classList.add("guessedAnswerC");
                scores[outOfContextPlayer] += 100; // Add 100 points for correct guess
            } else{
this.classList.add("guessedAnswerW");
}

            // Show the score page
            setTimeout(showScorePage, 800);
        });
    });
}

        // Function to show the score page
        function showScorePage() {
            // Sort players by score (descending order)
            const sortedPlayers = Object.keys(scores).sort((a, b) => scores[b] - scores[a]);

            // Save scores to localStorage
            localStorage.setItem('scores', JSON.stringify(scores));

            // Update the UI for the score page
            document.body.innerHTML = `
                <div class="scoreBoard"><h1>النتائج النهائية:</h1>
                <br>
                ${sortedPlayers.map(player => `<p>${player}: ${scores[player]} نقطة.</p>`).join('')}</div>
                <br>
                <button id="playAgainBtn">العبوا مرة ثانية</button>
                <button id="exitBtn">خروج</button>
            `;

            // Add event listeners to the buttons
            document.getElementById("playAgainBtn").addEventListener("click", function () {
                location.reload(); // Reload the page to play again
            });

            document.getElementById("exitBtn").addEventListener("click", function(){
exitGameAlert();
            });
        }

        // Helper function to shuffle an array
        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.1);
        }

        // Start the process by selecting the first player
        selectNextPlayer();
    });
});
    </script>
</body>
</html>